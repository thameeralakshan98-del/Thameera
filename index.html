<!DOCTYPE html>
<html lang="si">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Pro CV Maker | Sri Lanka</title>
    <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@300;400;600&display=swap" rel="stylesheet">
    <style>
        :root {
            --primary: #2563eb;
            --secondary: #1e40af;
            --bg: #f8fafc;
            --text: #1e293b;
        }

        body {
            font-family: 'Poppins', sans-serif;
            background-color: var(--bg);
            margin: 0;
            padding: 0;
            color: var(--text);
        }

        nav {
            background: white;
            padding: 15px 5%;
            display: flex;
            justify-content: space-between;
            align-items: center;
            box-shadow: 0 2px 10px rgba(0,0,0,0.1);
            position: sticky;
            top: 0;
            z-index: 1000;
        }

        .logo { font-size: 22px; font-weight: 700; color: var(--primary); text-decoration: none; }
        
        .container {
            max-width: 900px;
            margin: 30px auto;
            background: white;
            padding: 30px;
            border-radius: 12px;
            box-shadow: 0 4px 20px rgba(0,0,0,0.05);
        }

        /* Form Layout */
        .grid-2 { display: grid; grid-template-columns: 1fr 1fr; gap: 20px; }
        .form-group { margin-bottom: 15px; }
        label { display: block; margin-bottom: 6px; font-weight: 600; font-size: 14px; }
        input[type="text"], input[type="tel"], input[type="date"], textarea { 
            width: 100%; padding: 12px; border: 1px solid #cbd5e1; border-radius: 8px; box-sizing: border-box; font-family: inherit; 
        }
        input:focus, textarea:focus { border-color: var(--primary); outline: none; }

        /* --- Beautiful Custom Image Upload --- */
        .image-upload-wrapper {
            background: #f1f5f9;
            padding: 20px;
            border-radius: 12px;
            margin-bottom: 20px;
            text-align: center;
            border: 2px dashed #cbd5e1;
        }

        /* ‡∑É‡∑ê‡∂ü‡∑Ä‡∑î‡∂´‡∑î ‡∑É‡∑è‡∂∏‡∑è‡∂±‡∑ä‚Äç‡∂∫ File Input ‡∂ë‡∂ö */
        input[type="file"] {
            display: none;
        }

        /* ‡∂Ö‡∂Ω‡∑î‡∂≠‡∑ä ‡∂Ω‡∑É‡∑ä‡∑É‡∂± Upload Button ‡∂ë‡∂ö */
        .custom-upload-btn {
            display: inline-block;
            background: linear-gradient(135deg, var(--primary), #60a5fa);
            color: white;
            padding: 12px 25px;
            border-radius: 50px;
            font-weight: 600;
            cursor: pointer;
            transition: 0.3s ease;
            box-shadow: 0 4px 10px rgba(37, 99, 235, 0.3);
        }

        .custom-upload-btn:hover {
            transform: translateY(-2px);
            box-shadow: 0 6px 15px rgba(37, 99, 235, 0.4);
        }

        /* Preview Area (‡∂∏‡∑î‡∂Ω‡∑í‡∂±‡∑ä ‡∑É‡∂ü‡∑Ä‡∑è ‡∂á‡∂≠) */
        #preview-container {
            display: none;
            justify-content: center;
            align-items: center;
            gap: 20px;
            margin-top: 10px;
        }

        #form-image-preview {
            width: 110px;
            height: 110px;
            border-radius: 12px;
            object-fit: cover;
            border: 3px solid var(--primary);
            box-shadow: 0 4px 10px rgba(0,0,0,0.1);
        }

        /* Delete Button */
        .btn-delete {
            background: #ef4444;
            color: white;
            border: none;
            padding: 10px 15px;
            border-radius: 8px;
            font-weight: 600;
            cursor: pointer;
            transition: 0.3s;
            box-shadow: 0 4px 10px rgba(239, 68, 68, 0.3);
        }

        .btn-delete:hover {
            background: #dc2626;
            transform: translateY(-2px);
        }

        /* Main Buttons */
        .btn-main {
            background: var(--primary); color: white; padding: 15px; border: none;
            border-radius: 8px; width: 100%; font-size: 16px; font-weight: 600; cursor: pointer;
            transition: 0.3s; margin-top: 10px;
        }
        .btn-main:hover { background: var(--secondary); }

        /* CV Result Area (Preview) */
        #cv-preview { display: none; padding: 40px; border: 1px solid #e2e8f0; background: #fff; }
        .cv-header { display: flex; align-items: center; gap: 25px; border-bottom: 3px solid var(--primary); padding-bottom: 20px; margin-bottom: 25px; }
        #display-photo { width: 140px; height: 140px; border-radius: 10px; object-fit: cover; border: 3px solid var(--primary); }

        .cv-content-grid { display: grid; grid-template-columns: 1fr 1.5fr; gap: 30px; }
        .cv-section h3 { color: var(--primary); border-bottom: 1px solid #eee; padding-bottom: 5px; margin-bottom: 15px; font-size: 18px; }
        .info-item { margin-bottom: 12px; word-wrap: break-word; line-height: 1.5; }
        .info-item b { color: #475569; display: block; font-size: 13px; text-transform: uppercase; }
        .info-text { font-size: 15px; color: #1e293b; }

        .action-bar { display: none; gap: 10px; margin-bottom: 20px; }
        .btn-download { background: #059669; flex: 1; color: white; border:none; padding: 12px; border-radius: 8px; cursor: pointer; font-weight:600;}
        .btn-home { background: #475569; flex: 1; color: white; border:none; padding: 12px; border-radius: 8px; cursor: pointer; font-weight:600;}

        @media (max-width: 600px) {
            .grid-2, .cv-content-grid { grid-template-columns: 1fr; }
            .cv-header { flex-direction: column; text-align: center; }
            .container { margin: 10px; padding: 15px; }
            #cv-preview { padding: 20px; }
            #preview-container { flex-direction: column; }
        }

        @media print {
            nav, .action-bar, .form-container { display: none !important; }
            #cv-preview { display: block !important; border: none; padding: 0;}
            body { background: white; }
            .container { box-shadow: none; margin: 0; max-width: 100%; padding:0;}
        }
    </style>
</head>
<body>

    <nav>
        <a href="#" class="logo">üöÄ Pro CV Gen</a>
        <div style="display:flex; gap:15px;">
            <button onclick="goHome()" style="background:none; border:none; cursor:pointer; font-weight:600; color:var(--primary);">+ Create New</button>
        </div>
    </nav>

    <div class="container">
        <div class="action-bar" id="action-bar">
            <button class="btn-download" onclick="window.print()">üì• Download as PDF</button>
            <button class="btn-home" onclick="goHome()">üè† Edit Details</button>
        </div>

        <div class="form-container" id="form-container">
            <h2 style="text-align:center; color: var(--primary);">CV Generator</h2>
            
            <form id="cv-form">
                
                <div class="image-upload-wrapper">
                    <label style="color:var(--primary); font-size:16px; margin-bottom:10px;">‡∂î‡∂∂‡∑ö ‡∂°‡∑è‡∂∫‡∑è‡∂ª‡∑ñ‡∂¥‡∂∫</label>
                    
                    <label for="photo" class="custom-upload-btn" id="upload-label">
                        üì∏ ‡∂°‡∑è‡∂∫‡∑è‡∂ª‡∑ñ‡∂¥‡∂∫‡∂ö‡∑ä ‡∂ã‡∂©‡∑î‡∂ú‡∂≠ ‡∂ö‡∂ª‡∂±‡∑ä‡∂±
                    </label>
                    <input type="file" id="photo" accept="image/*" onchange="previewImage(this)">
                    
                    <div id="preview-container">
                        <img id="form-image-preview" src="" alt="Preview">
                        <button type="button" class="btn-delete" onclick="removeImage()">üóëÔ∏è ‡∂â‡∑Ä‡∂≠‡∑ä ‡∂ö‡∂ª‡∂±‡∑ä‡∂±</button>
                    </div>
                </div>

                <div class="grid-2">
                    <div class="form-group">
                        <label>‡∑É‡∂∏‡∑ä‡∂¥‡∑ñ‡∂ª‡∑ä‡∂´ ‡∂±‡∂∏</label>
                        <input type="text" id="name" placeholder="Kamal Silva" required>
                    </div>
                    <div class="form-group">
                        <label>‡∑Ñ‡∑ê‡∂Ø‡∑î‡∂±‡∑î‡∂∏‡∑ä‡∂¥‡∂≠‡∑ä ‡∂Ö‡∂Ç‡∂ö‡∂∫</label>
                        <input type="text" id="nic" placeholder="199XXXXXXXXX" required>
                    </div>
                </div>

                <div class="grid-2">
                    <div class="form-group">
                        <label>‡∂Ø‡∑î‡∂ª‡∂ö‡∂Æ‡∂± ‡∂Ö‡∂Ç‡∂ö‡∂∫</label>
                        <input type="tel" id="phone" placeholder="07XXXXXXXX" required>
                    </div>
                    <div class="form-group">
                        <label>‡∂ã‡∂¥‡∂±‡∑ä‡∂Ø‡∑í‡∂±‡∂∫</label>
                        <input type="date" id="dob" required>
                    </div>
                </div>

                <div class="form-group">
                    <label>‡∂Ω‡∑í‡∂¥‡∑í‡∂±‡∂∫</label>
                    <textarea id="address" rows="3" placeholder="No 123, Galle Road, Colombo..."></textarea>
                </div>

                <div style="background: #f1f5f9; padding: 20px; border-radius: 10px; margin: 20px 0;">
                    <label style="color:var(--primary); font-size:16px; margin-bottom:15px; display:block;">‡∂Ö‡∂∞‡∑ä‚Äç‡∂∫‡∑è‡∂¥‡∂± ‡∑É‡∑î‡∂Ø‡∑î‡∑É‡∑î‡∂ö‡∂∏‡∑ä</label>
                    <div class="grid-2">
                        <div class="form-group">
                            <label>O/L ‡∂¥‡∑ä‚Äç‡∂ª‡∂≠‡∑í‡∂µ‡∂Ω</label>
                            <textarea id="ol" placeholder="Maths-A, Science-B..."></textarea>
                        </div>
                        <div class="form-group">
                            <label>A/L ‡∂¥‡∑ä‚Äç‡∂ª‡∂≠‡∑í‡∂µ‡∂Ω</label>
                            <textarea id="al" placeholder="Physics-C, Combined Maths-B..."></textarea>
                        </div>
                    </div>
                    <div class="form-group">
                        <label>‡∑Ä‡∑ô‡∂±‡∂≠‡∑ä (Other Qualifications)</label>
                        <textarea id="other" rows="2" placeholder="Diplomas, Language Skills, etc..."></textarea>
                    </div>
                </div>

                <button type="button" class="btn-main" onclick="generateCV()">Generate Professional CV</button>
            </form>
        </div>

        <div id="cv-preview">
            <div class="cv-header">
                <img id="display-photo" src="" alt="Profile">
                <div>
                    <h1 id="display-name" style="margin:0; font-size:32px; color:#1e293b; text-transform: uppercase;"></h1>
                    <p id="display-nic" style="color:var(--primary); font-weight:600; font-size:18px; margin:5px 0;"></p>
                </div>
            </div>

            <div class="cv-content-grid">
                <div class="cv-section">
                    <h3>Contact & Info</h3>
                    <div class="info-item"><b>üìç Current Address</b><div id="display-address" class="info-text"></div></div>
                    <div class="info-item"><b>üìû Phone Number</b><div id="display-phone" class="info-text"></div></div>
                    <div class="info-item"><b>üìÖ Date of Birth</b><div id="display-dob" class="info-text"></div></div>
                </div>
                <div class="cv-section">
                    <h3>Academic Background</h3>
                    <div class="info-item"><b>General Certificate of Education (O/L)</b><div id="display-ol" class="info-text" style="white-space:pre-line;"></div></div>
                    <div class="info-item"><b>General Certificate of Education (A/L)</b><div id="display-al" class="info-text" style="white-space:pre-line;"></div></div>
                    <div class="info-item"><b>Additional Qualifications</b><div id="display-other" class="info-text" style="white-space:pre-line;"></div></div>
                </div>
            </div>
        </div>
    </div>

    <script>
        // 1. ‡∂¥‡∑í‡∂±‡∑ä‡∂≠‡∑ñ‡∂ª‡∂∫ ‡∂≠‡∑ö‡∂ª‡∑ñ ‡∂¥‡∑É‡∑î Upload Button ‡∂ë‡∂ö ‡∑É‡∂ü‡∑Ä‡∑è Preview ‡∂ë‡∂ö ‡∂¥‡∑ô‡∂±‡∑ä‡∑Ä‡∑ì‡∂∏
        function previewImage(input) {
            const previewContainer = document.getElementById('preview-container');
            const previewImg = document.getElementById('form-image-preview');
            const uploadLabel = document.getElementById('upload-label');

            if (input.files && input.files[0]) {
                const reader = new FileReader();
                reader.onload = function(e) {
                    previewImg.src = e.target.result;
                    uploadLabel.style.display = 'none'; // Upload Button ‡∂ë‡∂ö ‡∑É‡∂ü‡∑Ä‡∂∫‡∑í
                    previewContainer.style.display = 'flex'; // Preview ‡∑É‡∑Ñ Delete Button ‡∂¥‡∑ô‡∂±‡∑ä‡∑Ä‡∂∫‡∑í
                }
                reader.readAsDataURL(input.files[0]);
            }
        }

        // 2. ‡∂¥‡∑í‡∂±‡∑ä‡∂≠‡∑ñ‡∂ª‡∂∫ ‡∂â‡∑Ä‡∂≠‡∑ä ‡∂ö‡∑í‡∂ª‡∑ì‡∂∏‡∑ö Function ‡∂ë‡∂ö
        function removeImage() {
            document.getElementById('photo').value = ''; // Input ‡∂ë‡∂ö ‡∑Ñ‡∑í‡∑É‡∑ä ‡∂ö‡∂ª‡∂∫‡∑í
            document.getElementById('form-image-preview').src = ''; // ‡∂¥‡∑í‡∂±‡∑ä‡∂≠‡∑ñ‡∂ª‡∂∫ ‡∂â‡∑Ä‡∂≠‡∑ä ‡∂ö‡∂ª‡∂∫‡∑í
            
            document.getElementById('preview-container').style.display = 'none'; // Preview ‡∂ë‡∂ö ‡∑É‡∂ü‡∑Ä‡∂∫‡∑í
            document.getElementById('upload-label').style.display = 'inline-block'; // ‡∂±‡∑ê‡∑Ä‡∂≠‡∂≠‡∑ä Upload Button ‡∂ë‡∂ö ‡∂¥‡∑ô‡∂±‡∑ä‡∑Ä‡∂∫‡∑í
        }

        function generateCV() {
            const photoSrc = document.getElementById('form-image-preview').src;
            if(!photoSrc || photoSrc.includes('window.location') || photoSrc === '') {
                alert("‡∂ö‡∂ª‡∑î‡∂´‡∑è‡∂ö‡∂ª ‡∂°‡∑è‡∂∫‡∑è‡∂ª‡∑ñ‡∂¥‡∂∫‡∂ö‡∑ä ‡∂á‡∂≠‡∑î‡∑Ö‡∂≠‡∑ä ‡∂ö‡∂ª‡∂±‡∑ä‡∂±!");
                return;
            }

            // ‡∂Ø‡∂≠‡∑ä‡∂≠ ‡∂Ω‡∂∂‡∑è ‡∂Ø‡∑ì‡∂∏
            document.getElementById('display-name').innerText = document.getElementById('name').value;
            document.getElementById('display-nic').innerText = "NIC: " + document.getElementById('nic').value;
            document.getElementById('display-phone').innerText = document.getElementById('phone').value;
            document.getElementById('display-dob').innerText = document.getElementById('dob').value;
            document.getElementById('display-address').innerText = document.getElementById('address').value;
            document.getElementById('display-ol').innerText = document.getElementById('ol').value || 'N/A';
            document.getElementById('display-al').innerText = document.getElementById('al').value || 'N/A';
            document.getElementById('display-other').innerText = document.getElementById('other').value || 'None';
            document.getElementById('display-photo').src = photoSrc;

            // View Control
            document.getElementById('form-container').style.display = 'none';
            document.getElementById('cv-preview').style.display = 'block';
            document.getElementById('action-bar').style.display = 'flex';
            window.scrollTo(0,0);
        }

        function goHome() {
            document.getElementById('form-container').style.display = 'block';
            document.getElementById('cv-preview').style.display = 'none';
            document.getElementById('action-bar').style.display = 'none';
            // Form ‡∂ë‡∂ö Reset ‡∂ö‡∂ª‡∂± ‡∑Ä‡∑í‡∂ß ‡∂¥‡∑í‡∂±‡∑ä‡∂≠‡∑ñ‡∂ª‡∂∫‡∂Ø ‡∂Ö‡∂Ω‡∑î‡∂≠‡∑ä ‡∂≠‡∂≠‡∑ä‡∑Ä‡∂∫‡∂ß ‡∂¥‡∂≠‡∑ä ‡∂ö‡∂ª‡∂∫‡∑í
            document.getElementById('cv-form').reset();
            removeImage();
        }
    </script>
</body>
</html>